<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seleccionar Empleado</title>

</head>

<header>
  <%- include('./../partials/header/header.ejs') %>
</header>





<body class="bg-slate-200  ">





  <div id="container_seleccionar_empleado" class="flex flex-col min-h-screen gap-6 mx-auto ml-72 pt-[120px] pr-6 w-full max-w-11/12 transition-all duration-500">


    <aside class=" fixed left-0 top-0 h-full z-40">
      <%- include('./../partials/sidebars/modulos/incapacidades/sidebar_principal.ejs') %>
    </aside>



    <div id="container-seleccionar-empleado" class="relative shadow-[0px_4px_10px_rgba(100,116,139,0.5)] bg-white p-6 rounded-2xl w-full mx-auto my-6 flex flex-col items-center justify-center ">

      <%- include('./../partials/breadcrumb/modulos/incapacidades/breadcrumb_busquedad_personal_incapacidad.ejs') %>

      <div class="flex justify-start w-full">
        <h1 class="text-slate-800 font-[Markazi] font-bold mb-1 text-start block">SELECCIONE EMPLEADO</h1>
      </div>

      <form action="/incapacidad/seleccionar/empleado" method="POST" class="p-4 w-full max-w-3xl flex flex-col gap-4 ">

        <select id="filtro" name="filtro" class="bg-gray-50 border drop-shadow-sm border-gray-300 text-gray-900 text-sm rounded-lg outline-none focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5">
          <option selected>Seleccione una opción</option>
          <option value="cedula">CEDULA</option>
          <option value="contacto">CONTACTO</option>
          <option value="nombres">NOMBRES</option>
          <option value="apellidos">APELLIDOS</option>
        </select>

        <input id="busqueda" name="busqueda" type="text" class="outline-none w-full p-1.5 hidden drop-shadow-sm bg-gray-50 uppercase border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="Ingrese valor" required />

        <div class="w-full flex justify-center mt-2">
          <button type="submit" class="text-white bg-slate-700 w-2xs hover:bg-slate-800 focus:ring-1 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 me-1 mb-1 focus:outline-none">Buscar</button>
        </div>
      </form>
    </div>


    <% if (Empleados.length > 0) { %>

    <div class="w-full px-4 my-10 p-4 rounded-2xl flex flex-col items-center justify-center border ">

      <div class="relative overflow-x-auto shadow-md sm:rounded-lg w-full">

        <table class="w-full text-sm text-left rtl:text-right text-gray-500">
          <thead class="text-xs text-white uppercase bg-slate-700">
            <tr>
              <th class="px-2 py-2.5 border-r border-white text-center">Acceso</th>
              <th class="px-4 py-2.5 border-r border-white">Nombres</th>
              <th class="px-4 py-2.5 border-r border-white">Apellidos</th>
              <th class="px-4 py-2.5 border-r border-white">Documento</th>
              <th class="px-4 py-2.5 border-r border-white">Contacto</th>
              <th class="px-4 py-2.5 border-r border-white">Área</th>
              <th class="px-4 py-2.5 border-r border-white">Cargo</th>
              <th class="px-4 py-2.5 border-r border-white">Estado</th>
              <th class="px-4 py-2.5 border-r border-white">Jefe Inmediato</th>
              <th class="px-4 py-2.5 border-r border-white">EPS</th>
            </tr>
          </thead>

          <tbody>
            <% if (Empleados.length > 0) { %>
            <% for (let i = 0; i < Empleados.length; i++) { %>
            <tr class="bg-white border-b border-gray-200 hover:bg-gray-50">
              <td class="px-2 text-center">
                <a href="/incapacidad/detalle/incapacidad/empleado/<%= Empleados[i].id_empleado %>">
                  <i class='bx bxs-edit text-xl p-0 mr-2 text-cyan-800'></i>
                </a>
              </td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].nombres %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].apellidos %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].documento %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].contacto %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].area %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].cargo %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].estado %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].lider %></td>
              <td class="px-4 py-1.5 text-gray-800"><%= Empleados[i].eps %></td>
            </tr>
            <% } %>
            <% } else { %>
            <tr>
              <td colspan="10" class="px-4 py-3 text-center text-gray-800">
                No se encontraron empleados.
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>

      </div>
    </div>


    <% } else { %>

    <div class="mx-auto px-4 my-10 p-4 rounded-2xl flex flex-col items-center justify-center w-full max-w-10/12 bg-red-100 border border-red-400 text-red-700">
      <p class="text-lg font-semibold">No se encontraron empleados.</p>
    </div>

    <% } %>


  </div>





  <script src="/incapacidades/js/seleccionar-empleado/filtro-busqueda-empleado.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const menuBtn = document.getElementById('menu-btn');
      const sidebar = document.getElementById('sidebar');
      const container = document.getElementById('container_seleccionar_empleado');
  
      if (!menuBtn || !sidebar || !container) {
        console.error("No se encontró alguno de los elementos necesarios");
        return;
      }
  
      // Recuperar estado desde localStorage
      const sidebarState = localStorage.getItem('sidebarState');
      if (sidebarState === 'closed') {
        sidebar.classList.add('closed');
        container.classList.remove('ml-72');
        container.classList.add('ml-32');
      } else {
        sidebar.classList.remove('closed');
        container.classList.remove('ml-32');
        container.classList.add('ml-72');
      }
  
      // Escuchar clic
      menuBtn.addEventListener('click', function () {
        sidebar.classList.toggle('closed');
        const isClosed = sidebar.classList.contains('closed');
  
        // Guardar el nuevo estado
        localStorage.setItem('sidebarState', isClosed ? 'closed' : 'open');
  
        // Ajustar el contenedor
        if (isClosed) {
          container.classList.remove('ml-72');
          container.classList.add('ml-32');
        } else {
          container.classList.remove('ml-32');
          container.classList.add('ml-72');
        }
      });
    });
  </script>
  
  
  




</body>

</html>